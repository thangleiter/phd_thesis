\begin{tikzpicture}[
    >=stealth,
    auto,
    box/.style={
        draw,
        rectangle,
        rounded corners,
        thick,
        align=center,
        inner sep=2mm,
%        drop shadow,
    },
    logical/.style={box, fill=RWTHmagenta25, text=RWTHmagenta100},
    physical/.style={box, fill=RWTHgreen25, text=RWTHgreen100},
    calibration/.style={box, fill=RWTHorange25, text=RWTHorange100},
    main/.style={circle, draw, thick, minimum size=12mm},
    sub/.style={circle, draw, thin, minimum size=6mm, font=\small},
    arrow/.style={thick}
]

    % Logical instruments
    \node[logical] (sam) {\mjolnirapidoc{mjolnir.instruments.logical_instruments.html\#mjolnir.instruments.logical_instruments.Sample}{\code{Sample}}};
    \node[logical, above left=2cm and 0.9cm of sam] (det) {\mjolnirapidoc{mjolnir.instruments.logical_instruments.html\#mjolnir.instruments.logical_instruments.DetectionPath}{\code{DetectionPath}}};
    \node[logical, above right=2cm and 0.9cm of sam] (exc) {\mjolnirapidoc{mjolnir.instruments.logical_instruments.html\#mjolnir.instruments.logical_instruments.ExcitationPath}{\code{ExcitationPath}}};

    % Physical instruments
    \node[physical] (dac) at ($(sam)+(195:2.5cm)$) {\driversource{https://github.com/QCoDeS/Qcodes_contrib_drivers/blob/41ada0acaf8a59a317c5a171b4b8d985ce85b877/src/qcodes_contrib_drivers/drivers/QDevil/QDAC2.py}{QDAC-II}};
    \node[physical] (fridge) at ($(sam)+(240:2.5cm)$) {\driversource{https://github.com/microsoft/Qcodes/blob/a85d0b90b09bd1805eb5565cbc7291a2ec059770/src/qcodes/instrument_drivers/oxford/triton.py}{Triton 450}};
    \node[physical] (magnet) at ($(sam)+(300:2.5cm)$) {\driversource{https://github.com/microsoft/Qcodes/blob/b856c187c9c5839be71f01c67208dd2cf2fa3545/src/qcodes/instrument_drivers/oxford/MercuryiPS_VISA.py}{Mercury iPS}};
    \node[physical] (samdot) at ($(sam)+(345:2.5cm)$) {\dots};

    \node[physical] (spectrometer) at ($(det)+(165:3cm)$) {\driversource{https://github.com/QCoDeS/Qcodes_contrib_drivers/blob/65a4c7a6008f378d2d5111c189427b6ea5038658/src/qcodes_contrib_drivers/drivers/Horiba/Horiba_FHR.py}{FHR1000}};
    \node[physical] (ccd) at ($(det)+(195:3cm)$) {\driversource{https://github.com/qutech-lab/Qcodes_contrib_drivers/blob/a4bf00456931d56d1397a5d3311e3e91d0b5cb2f/src/qcodes_contrib_drivers/drivers/Andor/Andor_iDus4xx.py}{iDus 416}};
    \node[physical] (tagger) at ($(det)+(225:2.5cm)$) {\driversource{https://github.com/QCoDeS/Qcodes_contrib_drivers/blob/312e4043279ffcebe518d4df0316811a8b555eb3/src/qcodes_contrib_drivers/drivers/SwabianInstruments/Swabian_Instruments_Time_Tagger.py}{TimeTagger 20}};
    \node[physical] (detdot) at ($(det)+(285:2cm)$) {\dots};

    \node[physical] (laser) at ($(exc)+(15:3cm)$) {\driversource{https://github.com/QCoDeS/Qcodes_contrib_drivers/blob/41ada0acaf8a59a317c5a171b4b8d985ce85b877/src/qcodes_contrib_drivers/drivers/M2/M2_Solstis_3.py}{MÂ² Solstis}};
    \node[physical] (shutter) at ($(exc)+(345:3cm)$) {\driversource{https://github.com/qutech-lab/Qcodes_contrib_drivers/blob/1cbc4e43c72da4cc1fcff1530c2333887f6d9cbd/src/qcodes_contrib_drivers/drivers/Thorlabs/Thorlabs_MFF10x/kinesis.py}{MFF101/M}};
    \node[physical] (ndfilter) at ($(exc)+(315:2.5cm)$) {\driversource{https://github.com/qutech-lab/Qcodes_contrib_drivers/blob/fff0dc13230b20fb67fb81a05c964eb8bc88980b/src/qcodes_contrib_drivers/drivers/Thorlabs/Thorlabs_K10CR1/kinesis.py}{K10CR1/M}};
    \node[physical] (excdot) at ($(exc)+(255:2cm)$) {\dots};

    % Calibration handlers
    \node[calibration] (ccdcal) at ($(det)+(0cm,2cm)$) {\mjolnirapidoc{mjolnir.calibration.html\#mjolnir.calibration.CcdCalibrationHandler}{\code{CcdCalibrationHandler}}};
    \node[calibration] (power) at ($(exc)+(-2cm,1cm)$) {\mjolnirapidoc{mjolnir.calibration.html\#mjolnir.calibration.PowerCalibrationHandler}{\code{PowerCalibrationHandler}}};
    \node[calibration] (rejection) at ($(exc)+(+1cm,2cm)$) {\mjolnirapidoc{mjolnir.calibration.html\#mjolnir.calibration.RejectionFeedbackHandler}{\code{RejectionFeedbackHandler}}};

    % Arrows from physical to logical instruments
    \foreach \subnode in {dac,fridge,magnet,samdot}
        \draw[arrow, ->] (\subnode) -- (sam);
    \foreach \subnode in {spectrometer,ccd,tagger,detdot}
        \draw[arrow, ->] (\subnode) -- (det);
    \foreach \subnode in {laser,shutter,ndfilter,excdot}
        \draw[arrow, ->] (\subnode) -- (exc);

    % Arrows from logical instruments to calibration handlers
    \foreach \subnode in {ccdcal}
        \draw[arrow, ->] (det) -- (\subnode);
    \foreach \subnode in {power,rejection}
        \draw[arrow, ->] (exc) -- (\subnode);

    % Connections between logical instruments
    \draw[arrow, dashed, <->] (exc) -- (sam);
    \draw[arrow, dashed, <->] (sam) -- (det);
    \draw[arrow, dashed, <->] (det) -- (exc);

\end{tikzpicture}