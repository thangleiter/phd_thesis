% Language macros
\newcommand{\Ie}{\emph{I.\nobreak\hairsp{}e.\@}\xspace}
\newcommand{\Eg}{\emph{E.\nobreak\hairsp{}g.\@}\xspace}
\newcommand{\cf}{\emph{cf.\@}\xspace}
\newcommand{\Cf}{\emph{Cf.\@}\xspace}
\newcommand{\viz}{\emph{viz.\@}\xspace}
\newcommand{\wrt}{w.\nobreak\hairsp{}r.\nobreak\hairsp{}t.\@\xspace}
\newcommand{\ibid}{\emph{ibid.\@}\xspace}

% Text macros
\newcommand{\code}[1]{\pyinline{#1}}
\newcommand{\codev}[1]{\texttt{#1}}
\newcommand{\thepower}[2]{\ensuremath{P = \qty{#1}{#2\watt}}.\xspace}
\newcommand{\thevoltage}[2]{\ensuremath{V_{\mr{#2}} = \qty{#1}{\volt}}.\xspace}
\newcommand{\thewavelength}[1]{\ensuremath{\lambda_{\mr{exc}} = \qty{#1}{\nano m}}.\xspace} % XXX: \meter somehow causes an error

\newcommand{\thethesis}{the present thesis\xspace}
\newcommand{\thispart}{this part of \thethesis}
\newcommand{\Thispart}{This part of \thethesis}
% Instruments
\newcommand{\oxinst}{Oxford Instruments\xspace}
\newcommand{\odin}{\oxinst Triton 450\xspace}
\newcommand{\thedmm}{Keysight 34465A\xspace}
\newcommand{\swinst}{Swabian Instruments\xspace}
\newcommand{\taggershort}{Time Tagger\xspace}
\newcommand{\tagger}{\swinst \taggershort 20\xspace}
\newcommand{\thespcm}{Excelitas SPCM-850-14-FC\xspace}
\newcommand{\theccd}{Andor iDus 416\xspace}
\newcommand{\thespectrometer}{Horiba FHR1000\xspace}
\newcommand{\cmoscam}{Thorlabs DCC1545M \gls{cmos} camera\xspace}
\newcommand{\pumplaser}{Lighthouse Photonics Sprout-G\xspace}
\newcommand{\tisalaser}{M Squared Solstis\xspace}
\newcommand{\pulsedlaser}{Coherent Mira 900-F\xspace}
\newcommand{\accelerometer}{Wilcoxon 731--207\xspace}
\newcommand{\objectivelens}{Thorlabs 354330-B\xspace}
\newcommand{\ocularlens}{Thorlabs A280TM-B\xspace}
\newcommand{\thewindow}{Thorlabs WW41050-B\xspace}
\newcommand{\thorlabsrotator}{Thorlabs K10CR1/M\xspace}
\newcommand{\thorlabsflipper}{Thorlabs MFF101/M\xspace}
\newcommand{\thorlabspowermeter}{Thorlabs PM100D\xspace}
\newcommand{\thefiber}{Thorlabs 780HP\xspace}
\newcommand{\positioner}{Attocube ANPx311\xspace}
\newcommand{\rotator}{Attocube ECR4040\xspace}
\newcommand{\polarizer}{Thorlabs LPVIS050-MP2\xspace}
\newcommand{\polarizerunmounted}{Thorlabs LPVIS050\xspace}
\newcommand{\positionercontroller}{Attocube ANC350\xspace}
\newcommand{\rotatorcontroller}{Attocube AMC100\xspace}
\newcommand{\decadac}{DecaDAC\xspace}
\newcommand{\qdac}{QDevil QDAC-II\xspace}
\newcommand{\baselinst}{Basel Precision Instruments\xspace}
\newcommand{\baseltia}{\baselinst SP 983c\xspace}
\newcommand{\zhinst}{Zurich Instruments\xspace}
\newcommand{\hdawg}{\zhinst HDAWG\xspace}

% Software
\newcommand{\python}{Python\xspace}
\newcommand{\package}[1]{\nohyphens{\code{#1}}\xspace}
\newcommand{\pyspeck}{\package{python_spectrometer}}
\newcommand{\mjolnir}{\package{mjolnir}}
\newcommand{\qutil}{\package{qutil}}
\newcommand{\xarray}{\package{xarray}}
\newcommand{\filterfunctions}{\package{filter_functions}}
\newcommand{\qupulse}{\package{qupulse}}
\newcommand{\qopt}{\package{qopt}}
\newcommand{\qumada}{\package{QuMADA}}
\newcommand{\numpy}{\package{NumPy}}
\newcommand{\scipy}{\package{SciPy}}
\newcommand{\matplotlib}{\package{matplotlib}}
\newcommand{\qutip}{\package{QuTiP}}
\newcommand{\sparse}{\package{sparse}}
\newcommand{\opteinsum}{\package{opt_einsum}}
\newcommand{\jupyter}{\package{Jupyter}}
\newcommand{\qcodes}{\package{QCoDeS}}
\newcommand{\pymoosh}{\package{PyMoosh}}
\newcommand{\pulsesequence}{\code{PulseSequence}\xspace}
\newcommand{\pulsesequences}{\code{PulseSequence}s\xspace}
\newcommand{\qobj}{\code{Qobj}\xspace}
\newcommand{\slowprocessor}{AMD FX\texttrademark-6300 processor with six logical cores\xspace}
\newcommand{\fastprocessor}{Intel\textsuperscript{\textregistered}\ Core\texttrademark\ i9-9900K eight-core processor\xspace}

% Units
\DeclareSIUnit{\gaccel}{\mathit{g}}
\DeclareSIUnit{\cts}{cts}
\DeclareSIUnit{\cps}{cps}
\DeclareSIUnit{\sample}{S}
\DeclareSIUnit{\pixel}{px}
\DeclareSIUnit{\bar}{bar}
\DeclareSIUnit{\txtdegree}{deg}
\DeclareSIUnit{\permill}{\textperthousand}
\DeclareSIUnit{\electron}{\ensuremath{e}}

% Table macros
\newcolumntype{C}{>{\collectcell\code}c<{\endcollectcell}} % makes the whole column texttt style
\newcommand{\tableheadline}[1]{\multicolumn{1}{l}{\spacedlowsmallcaps{#1}}} % uses spacedlowsmallcaps borrowed from classicthesis

% Maths
\newcommand{\mc}[1]{\ensuremath{\mathcal{#1}}}
\newcommand{\mr}[1]{\ensuremath{\mathrm{#1}}}
\newcommand{\e}[0]{\ensuremath{e\xspace}}
\renewcommand{\i}[0]{\ensuremath{i\xspace}}
\newcommand{\eps}[0]{\ensuremath{\epsilon}\xspace}
\newcommand{\del}[0]{\ensuremath{\partial}}
\newcommand{\placeholder}[0]{\:\bullet\:}
\newcommand{\st}[0]{\ensuremath{\mathrm{S\mbox{-}T_0}}\xspace}
\newcommand{\diam}[0]{\ensuremath{\eta}\xspace}
\newcommand{\plvec}[0]{\ensuremath{\vec{\sigma}}\xspace}
\newcommand{\idop}[0]{\ensuremath{\mathbb{1}}\xspace}
\newcommand{\la}[0]{\ensuremath{\leftarrow}\xspace}
\newcommand{\x}[1]{\ensuremath{X_{\pi/2}^{(#1)}}\xspace}
\newcommand{\y}[1]{\ensuremath{Y_{\pi/2}^{(#1)}}\xspace}
\newcommand{\vc}[1]{\ensuremath{\vec{#1}}\xspace}
\newcommand{\mat}[1]{\ensuremath{\symbf{#1}}\xspace}
\newcommand{\bvec}[1]{\ensuremath{\symbf{#1}}\xspace}
\newcommand{\ubvec}[1]{\ensuremath{\hat{\bvec{e}}_{#1}}\xspace}
\newcommand{\pbvec}[1]{\ensuremath{\bvec{#1}}^{\prime}\xspace}
% QI
\newcommand{\fid}[0]{\ensuremath{F}\xspace}
\newcommand{\avgfid}[0]{\ensuremath{\fid_\mr{avg}}\xspace}
\newcommand{\entfid}[0]{\ensuremath{\fid_\mr{ent}}\xspace}
\newcommand{\infid}[0]{\ensuremath{I}\xspace}
\newcommand{\leak}[0]{\ensuremath{L}\xspace}
\newcommand{\avginfid}[0]{\ensuremath{\infid_\mr{avg}}\xspace}
\newcommand{\entinfid}[0]{\ensuremath{\infid_\mr{ent}}\xspace}
\newcommand{\oneoverf}{\ensuremath{\flatfrac{1}{f}}\xspace}
\newcommand{\vecsig}[0]{\ensuremath{\bvec{\sigma}}\xspace}
\newcommand{\sx}[0]{\ensuremath{\sigma_x}\xspace}
\newcommand{\sy}[0]{\ensuremath{\sigma_y}\xspace}
\newcommand{\sz}[0]{\ensuremath{\sigma_z}\xspace}
%\newcommand{\eye}[0]{\ensuremath{\openone}\xspace}
\newcommand{\eye}[0]{\ensuremath{\mathds{1}}\xspace}
\newcommand{\sts}[0]{\ensuremath{\mathrm{S\mbox{-}T_0}}\xspace}
\newcommand{\kets}[0]{\mbox{\ensuremath{\ket{\mr{S}}}}\xspace}
\newcommand{\kett}[0]{\mbox{\ensuremath{\ket{\mr{T_0}}}}\xspace}
\newcommand{\kettp}[0]{\mbox{\ensuremath{\ket{\mr{T_+}}}}\xspace}
\newcommand{\kettm}[0]{\mbox{\ensuremath{\ket{\mr{T_-}}}}\xspace}
\newcommand{\ketud}[0]{\mbox{\ensuremath{\ket{\uparrow\downarrow}}}\xspace}
\newcommand{\ketdu}[0]{\mbox{\ensuremath{\ket{\downarrow\uparrow}}}\xspace}
\newcommand{\ketuu}[0]{\mbox{\ensuremath{\ket{\uparrow\uparrow}}}\xspace}
\newcommand{\ketdd}[0]{\mbox{\ensuremath{\ket{\downarrow\downarrow}}}\xspace}
\newcommand{\ketuudd}[0]{\mbox{\ensuremath{\ket{\uparrow\uparrow\downarrow\downarrow}}}\xspace}
\newcommand{\ketdduu}[0]{\mbox{\ensuremath{\ket{\downarrow\downarrow\uparrow\uparrow}}}\xspace}
\newcommand{\ketudud}[0]{\mbox{\ensuremath{\ket{\uparrow\downarrow\uparrow\downarrow}}}\xspace}
\newcommand{\ketdudu}[0]{\mbox{\ensuremath{\ket{\downarrow\uparrow\downarrow\uparrow}}}\xspace}
\newcommand{\ketuddu}[0]{\mbox{\ensuremath{\ket{\uparrow\downarrow\downarrow\uparrow}}}\xspace}
\newcommand{\ketduud}[0]{\mbox{\ensuremath{\ket{\downarrow\uparrow\uparrow\downarrow}}}\xspace}
\newcommand{\brauudd}[0]{\mbox{\ensuremath{\bra{\uparrow\uparrow\downarrow\downarrow}}}\xspace}
\newcommand{\bradduu}[0]{\mbox{\ensuremath{\bra{\downarrow\downarrow\uparrow\uparrow}}}\xspace}
\newcommand{\braudud}[0]{\mbox{\ensuremath{\bra{\uparrow\downarrow\uparrow\downarrow}}}\xspace}
\newcommand{\bradudu}[0]{\mbox{\ensuremath{\bra{\downarrow\uparrow\downarrow\uparrow}}}\xspace}
\newcommand{\brauddu}[0]{\mbox{\ensuremath{\bra{\uparrow\downarrow\downarrow\uparrow}}}\xspace}
\newcommand{\braduud}[0]{\mbox{\ensuremath{\bra{\downarrow\uparrow\uparrow\downarrow}}}\xspace}
\newcommand{\kpsi}[0]{\mbox{\ensuremath{\ket{\psi}}}\xspace}
\newcommand{\kphi}[0]{\mbox{\ensuremath{\ket{\phi}}}\xspace}
\newcommand{\bpsi}[0]{\mbox{\ensuremath{\bra{\psi}}}\xspace}
\newcommand{\bphi}[0]{\mbox{\ensuremath{\bra{\phi}}}\xspace}
\newcommand{\dotHS}[2]{\ensuremath{\expval{#1,#2}}\xspace}
\newcommand{\basis}[0]{\ensuremath{\mathsf{C}}\xspace}
\newcommand{\Hspace}{\ensuremath{\mathscr{H}}\xspace}
\newcommand{\Lspace}{\ensuremath{\mathscr{L}}\xspace}
\newcommand{\adjoint}{\ensuremath{^\dagger}\xspace}
\newcommand{\transpose}{\ensuremath{^\top}\xspace}
\newcommand{\inverse}{\ensuremath{^{-1}}\xspace}
\newcommand{\conjugate}{\ensuremath{^\ast}\xspace}
\newcommand{\gth}[1]{\ensuremath{^{(#1)}}\xspace}
\newcommand{\gthv}[2]{\ensuremath{^{(#1)#2}}\xspace}
\newcommand{\ddf}[1]{\ensuremath{\frac{\dd{#1}}{2\pi}}\xspace}
\newcommand{\intinf}{\ensuremath{\int_{-\infty}^{\infty}}\xspace}
\newcommand{\set}[2]{\ensuremath{\left\lbrace {#1}_{#2}\right\rbrace_{#2}}\xspace}
% Gates
\newcommand{\CNOT}[0]{\ensuremath{\mr{CNOT}}\xspace}
\newcommand{\X}[1]{\ensuremath{\mr{X}_{\flatfrac{\pi}{#1}}}\xspace}
\newcommand{\Y}[1]{\ensuremath{\mr{Y}_{\flatfrac{\pi}{#1}}}\xspace}
\newcommand{\XID}[1]{\ensuremath{\mr{X}_{\flatfrac{\pi}{#1}}\otimes\mr{I}}\xspace}
\newcommand{\YID}[1]{\ensuremath{\mr{Y}_{\flatfrac{\pi}{#1}}\otimes\mr{I}}\xspace}
% Filter function math
\newcommand{\Li}{\ensuremath{\mathcal{L}}\xspace}
\newcommand{\Lc}{\ensuremath{\mathcal{L}_\mr{c}}\xspace}
\newcommand{\Ln}{\ensuremath{\mathcal{L}_\mr{n}}\xspace}
\newcommand{\Lnt}{\ensuremath{\tilde{\mathcal{L}}_\mr{n}}\xspace}
\newcommand{\Lnb}{\ensuremath{\bar{\mathcal{L}}_\mr{n}}\xspace}
\newcommand{\Hc}{\ensuremath{H_\mr{c}}\xspace}
\newcommand{\Hn}{\ensuremath{H_\mr{n}}\xspace}
\newcommand{\Hnt}{\ensuremath{\tilde{H}_\mr{n}}\xspace}
\newcommand{\Hnb}{\ensuremath{\bar{H}_\mr{n}}\xspace}
\newcommand{\Ue}{\ensuremath{\tilde{U}}\xspace}
\newcommand{\Uc}{\ensuremath{U_\mr{c}}\xspace}
\newcommand{\Pe}{\ensuremath{\tilde{\mathcal{U}}}\xspace}
\newcommand{\Rc}{\ensuremath{\tilde{\mathcal{B}}}\xspace}
\newcommand{\Ba}{\ensuremath{B_\alpha}\xspace} % noise operators
\newcommand{\Bt}{\ensuremath{\tilde{B}}\xspace}
\newcommand{\Bat}{\ensuremath{\Bt_\alpha}\xspace} % interaction picture noise operators
\newcommand{\Bab}{\ensuremath{\bar{B}_\alpha}\xspace} % interaction picture noise operators
% Superoperator formalism
\newcommand{\decayamps}[0]{\ensuremath{\Gamma}\xspace}
\newcommand{\freqshifts}[0]{\ensuremath{\Delta}\xspace}
\newcommand{\cumulantfun}[0]{\ensuremath{\mc{K}}\xspace}
\newcommand{\ctrlmat}[0]{\ensuremath{\tilde{\mc{B}}}\xspace}
\newcommand{\FF}[0]{\ensuremath{\mc{F}}\xspace}
\newcommand{\FFot}[0]{\ensuremath{\FF(\omega;\tau)}\xspace}
\newcommand{\FFi}[0]{\ensuremath{\FF_{\decayamps}}\xspace}
\newcommand{\FFc}[0]{\ensuremath{\FF_{\freqshifts}}\xspace}
\newcommand{\FFim}[1]{\ensuremath{\FF_{\decayamps,#1}}\xspace}
\newcommand{\FFcm}[1]{\ensuremath{\FF_{\freqshifts,#1}}\xspace}
\newcommand{\liouvP}[0]{\ensuremath{\mc{P}}\xspace}
\newcommand{\liouvQ}[0]{\ensuremath{\mc{Q}}\xspace}
\newcommand{\liouvU}[0]{\ensuremath{\mc{U}}\xspace}
\newcommand{\liouvUc}[0]{\ensuremath{\mc{U}_\mr{c}}\xspace}
\newcommand{\liouvUe}[0]{\ensuremath{\mc{\tilde{U}}}\xspace}
\newcommand{\liouvUec}[0]{\ensuremath{\tilde{\mc{U}}^{(1)}}\xspace}
\newcommand{\liouvUeavg}[0]{\ensuremath{\ev*{\liouvUe}}\xspace}
\newcommand{\liouvUetavg}[0]{\ensuremath{\ev*{\liouvUe(\tau)}}\xspace}
\newcommand{\qp}[0]{\ensuremath{\mc{E}}\xspace}
% -----------------------
% Liouville space algebra
% -----------------------
% Double bra
\NewDocumentCommand{\dbra}{s m}{%
  \IfBooleanTF{#1}
    {\langle\!\!\bra*{#2}}% starred (fixed)
    {\left\langle\!\bra{#2}\right.}% unstarred (auto)
}
% Double ket
\NewDocumentCommand{\dket}{s m}{%
  \IfBooleanTF{#1}
    {\ket*{#2}\!\rangle}% starred (fixed)
    {\left.\ket{#2}\!\right\rangle}% unstarred (auto)
}
% Inner product
\NewDocumentCommand{\dip}{s m m}{%
  \IfBooleanTF{#1}
    {\langle\!\!\braket*{#2}{#3}\!\rangle}%
    {\left\langle\!\braket{#2}{#3}\!\right\rangle}%
}
% Outer product (dyad)
\NewDocumentCommand{\dop}{s m m}{%
  \IfBooleanTF{#1}
    {\dket*{#2}\!\dbra*{#3}}%
    {\dket{#2}\!\dbra{#3}}%
}
% Matrix element
\NewDocumentCommand{\dmel}{s m m m}{%
  \IfBooleanTF{#1}
    {\langle\!\!\mel*{#2}{#3}{#4}\!\rangle}%
    {\left\langle\!\!\mel{#2}{#3}{#4}\!\right\rangle}%
}
% Expectation value
\NewDocumentCommand{\dev}{s m m}{%
  \IfBooleanTF{#1}
    {\langle\!\!\expval*{#2}{#3}\!\rangle}%
    {\left\langle\!\!\expval{#2}{#3}\!\right\rangle}%
}
% Aliases
\NewDocumentCommand{\dketbra}{s m m}{\dop#1{#2}{#3}} % alias for dyad
\NewDocumentCommand{\ddyad}{s m m}{\dop#1{#2}{#3}} % alias for dyad
\NewDocumentCommand{\dbraket}{s m m}{\dip#1{#2}{#3}} % alias for inner product
\NewDocumentCommand{\dexpval}{s m m}{\dev#1{#2}{#3}} % alias for expectation value
\NewDocumentCommand{\dmatrixel}{s m m m}{\dmel#1{2}{#3}{4}} % alias for matrix element
% ------------
% Spectroscopy
\newcommand{\dt}{\ensuremath{\Delta t}\xspace}
\newcommand{\df}{\ensuremath{\Delta f}\xspace}
\newcommand{\fs}{\ensuremath{f_\mr{s}}\xspace}
\newcommand{\fmax}{\ensuremath{f_\mr{max}}\xspace}
\newcommand{\fmin}{\ensuremath{f_\mr{min}}\xspace}
% Optics
\newcommand{\fob}{\ensuremath{f_\mr{ob}}\xspace}
\newcommand{\foc}{\ensuremath{f_\mr{oc}}\xspace}
\newcommand{\halfwave}{\ensuremath{\flatfrac{\lambda}{2}}\xspace}
\newcommand{\quarterwave}{\ensuremath{\flatfrac{\lambda}{4}}\xspace}
\newcommand{\g}[1]{\ensuremath{g\gth{#1}}\xspace}
\newcommand{\TEM}[1]{\ensuremath{\mr{\acrshort{tem}}_{#1}}\xspace}
\newcommand{\NA}{\ensuremath{\mr{\acrshort{na}}}\xspace}
\newcommand{\CA}{\ensuremath{\mr{\acrshort{ca}}}\xspace}
\newcommand{\MFD}{\ensuremath{\mr{\acrshort{mfd}}}\xspace}
\newcommand{\QE}{\ensuremath{\mr{\acrshort{qe}}}\xspace}
\newcommand{\OD}{\ensuremath{\mr{\acrshort{od}}}\xspace}
\newcommand{\reflectance}{\ensuremath{\mathscr{R}}\xspace}
\newcommand{\transmittance}{\ensuremath{\mathscr{T}}\xspace}
\newcommand{\absorptance}{\ensuremath{\mathscr{A}}\xspace}
% Physics
\newcommand{\kb}{\ensuremath{k_{\mr{B}}}\xspace}
\newcommand{\mub}{\ensuremath{\mu_{\mr{B}}}\xspace}
\newcommand{\Tmxc}{\ensuremath{T_{\mr{\acrshort{mxc}}}}\xspace}
\newcommand{\GaAsAlGaAs}{\ch{GaAs/Al_{\ensuremath{x}}Ga_{\ensuremath{1-x}}As}\xspace}
% Gates
\newcommand{\VDM}{\ensuremath{V_{\mr{DM}}}\xspace}
\newcommand{\VCM}{\ensuremath{V_{\mr{CM}}}\xspace}
\newcommand{\VT}{\ensuremath{V_{\mr{T}}}\xspace}
\newcommand{\VB}{\ensuremath{V_{\mr{B}}}\xspace}

% math operators
\DeclareMathOperator{\rms}{RMS}
\DeclareMathOperator{\enbw}{ENBW}
\DeclareMathOperator{\sinc}{sinc}
\DeclareMathOperator{\asinh}{asinh}
\DeclareMathOperator{\rayleigh}{Rayleigh}
\DeclareMathOperator{\uniform}{Unif}
\DeclareMathOperator{\poisson}{Pois}
\DeclareMathOperator{\expdist}{Exp}
\DeclareMathOperator{\variance}{Var}
\DeclareMathOperator{\expectation}{E}
\DeclareMathOperator{\re}{Re}
\DeclareMathOperator{\im}{Im}
\DeclareMathOperator{\diag}{diag}
\DeclareMathOperator{\Ai}{Ai}
\DeclareMathOperator{\Bi}{Bi}

% Affiliations
\newcommand{\RUB}{Ruhr-Universität Bochum\@.}
\newcommand{\RWTH}{RWTH Aachen University\@.}
\newcommand{\FZJ}{Forschungszentrum Jülich GmbH\@.}
\newcommand{\RWTHFZJ}{RWTH Aachen University and Forschungszentrum Jülich GmbH\@.}

% Citation macros
\DeclareCiteCommand{\citenum}
  {}
  {\bibhyperref{\printfield{labelnumber}}}
  {}
  {}
\newcommand{\citer}[1]{Reference~\citenum{#1}\xspace}
\newcommand{\citerr}[2]{Refences~\citenum{#1} and~\citenum{#2}\xspace}
\newcommand{\citerrr}[3]{References~\citenum{#1},~\citenum{#2}, and~\citenum{#3}\xspace}
\newcommand{\sideciter}[1]{Reference~\sidecite{#1}\xspace}
\newcommand{\sidehref}[2]{#2\sidenote{\url{#1}}}
\newcommand{\sideurl}[1]{\sidenote{\url{#1}}}
\newcommand{\imgsource}[1]{Generated by \repolink{#1}.}
\DeclareRobustCommand{\sampleid}[1]{Sample: \textsc{\detokenize{#1}}.}
\DeclareRobustCommand{\hidelinkhref}[2]{%
    {\begingroup%
        \hypersetup{hidelinks}%
        \href{#1}{#2}%
    \endgroup}%
}
\DeclareRobustCommand{\repolink}[1]{%
    % https://genai.rwth-aachen.de/app/conversations/68094898cd677dccf7756dab
    \texorpdfstring{%
        \hidelinkhref{https://git.rwth-aachen.de/tobias.hangleiter/phd_thesis/-/tree/main/#1}{\texttt{\detokenize{#1}}}%
    }{%
        % Fallback for PDF bookmarks and list entries
        \href{https://git.rwth-aachen.de/tobias.hangleiter/phd_thesis/-/tree/main/#1}{\texttt{\detokenize{#1}}}%
    }%
}
\newcommand{\pyspeckpath}[2]{\hidelinkhref{https://git.rwth-aachen.de/qutech/python-spectrometer/-/tree/main/#1}{#2}}
\newcommand{\mjolnirpath}[2]{\hidelinkhref{https://git-ce.rwth-aachen.de/qutech/lab_software/python-mjolnir/-/tree/main/#1}{#2}}
\newcommand{\mjolnirapidoc}[2]{\texorpdfstring{\hidelinkhref{https://qutech.pages.git-ce.rwth-aachen.de/lab_software/python-mjolnir/_autogen/#1}{#2}}{#2}}

% Fancy lettrines
\newcommand{\mylettrine}[2]{
    \lettrine[lines=3, lhang=0.33, loversize=0.25]{#1}{#2}
}
% https://genai.rwth-aachen.de/app/conversations/6808e87d0255ddb6ed2421f3
\ExplSyntaxOn
\NewDocumentCommand{\AutoLettrine}{m}{
    % Set the input word to a token list variable.
    \tl_set:Nn \l_tmpa_tl { #1 }
    % Use the head (first token) and tail (remaining tokens) to call \lettrine.
    \mylettrine{\tl_head:N \l_tmpa_tl}{\tl_tail:N \l_tmpa_tl}
}
\ExplSyntaxOff

% Author contributions environment
\newenvironment{partcontribs}{%
  \begin{displayquote}
  \textbf{Author contributions}\enspace---\itshape
}{%
  \end{displayquote}
  \medskip
}

% Note environment
\newenvironment{authornote}{%
  \begin{displayquote}
  \textbf{Note}\enspace---\itshape
}{%
  \end{displayquote}
  \medskip
}

\newminted[py]{python}{
    autogobble=true,%
    frame=leftline,% none | leftline | topline | bottomline | lines | single
    fontsize=\small,% normalsize, small, footnotesize
    linenos=false,
    firstnumber=last,% line number counts incrementally
}
\newmintinline[pyinline]{python}{
    breaklines,%
    breakafter=._,%
}

% Minted and (presumably) sidenotes do NOT like each other at all.
% This tries to wrap py to always start in vertical mode, but it does  not always appear
% to work. Try tuning the \vspace if it does not, that usually does the trick. If not,
% may Don Knuth be with you.
\newenvironment{pycode}{%
  \par\vspace{\baselineskip}\VerbatimEnvironment\begin{py}  % \par ensures vertical mode; optional spacing
}{%
  \end{py}\par\vspace{\baselineskip} % end with vertical mode + optional spacing
}
